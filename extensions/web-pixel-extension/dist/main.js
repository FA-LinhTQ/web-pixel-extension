(()=>{var p="WebPixel::Render";var s=function(e){return shopify.extend(p,e)};var d="https://pixel-api-stag.socialhead.dev";var c="/api/store/conversions-api",n="payment_info_submitted",u=[n];var _="",q={},f="",y={},I="",P=[],m=0,N=[],h=0,T="",C=t=>{V("AddPaymentInfo",t,{content_ids:P,contents:N,currency:T,value:h})},R=t=>{t.lineItems.forEach(e=>{P.push(e.variant.id),m=m+e.quantity,N.push({id:e.variant.id,quantity:e.quantity})}),T=t.currencyCode,h=parseFloat(t.totalPrice.amount)},V=(t,e,o)=>{let l={shop:f,event_name:t,event_time:new Date().getTime(),event_id:e,action_source:"website",custom_data:o,event_source_url:I,social_type:"facebook"};y.sendBeacon("https://ef50-42-96-52-2.ngrok-free.app"+c,JSON.stringify(l))};function E(t,e,o){switch(_=e.name,q=e,f=o,y=t,I=e.context.document.location.href,R(e.data.checkout),_){case n:C(e.id);break}}var g="",F={},x="",k={},O="",A=0,S=[],b=0,w="",M=t=>{Y("AddPaymentInfo",t,{contents:S,currency:w,value:b})},U=t=>{t.lineItems.forEach(e=>{A=A+e.quantity,S.push({id:e.variant.id,quantity:e.quantity})}),w=t.currencyCode,b=parseFloat(t.totalPrice.amount)},Y=(t,e,o)=>{let l={shop:x,event_name:t,event_time:new Date().getTime(),event_id:e,action_source:"website",custom_data:o,event_source_url:O,social_type:"tiktok"};k.sendBeacon("https://ef50-42-96-52-2.ngrok-free.app"+c,JSON.stringify(l))};function v(t,e,o){switch(g=e.name,F=e,x=o,k=t,O=e.context.document.location.href,U(e.data.checkout),g){case n:M(e.id);break}}var D=[],B=[];console.log("%c77777777777777","color: red; font-weight: bold; font-size: 20px; padding: 4px");s(({analytics:t,browser:e,settings:o,init:l})=>{t.subscribe("all_standard_events",r=>{u.includes(r.name)&&(console.log("%coutput","color: green; font-weight: bold; font-size: 20px;",r),fetch(d+"/api/store/pixel?shop="+o.accountID).then(a=>a.json()).then(a=>{a.data&&a.data.length>0?(a.data.forEach(i=>{i.social_type==="facebook"&&D.push(i),i.social_type==="tiktok"&&B.push(i)}),D.length>0&&E(e,r,o.accountID),B.length>0&&v(e,r,o.accountID)):console.log("empty pixels")}).catch(a=>{console.log(a)}))}),console.log("web pixel loaded")});})();
