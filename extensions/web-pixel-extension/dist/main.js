(()=>{var m="WebPixel::Render";var d=function(t){return shopify.extend(m,t)};var l="https://639d-42-96-52-2.ngrok-free.app",f="https://pixel-api-stag.socialhead.dev";var c="/api/store/conversions-api",n="payment_info_submitted",I=[n];var P={},y="",N={},p=[],x=[],h=[],A=0,T="",D=e=>{C("AddPaymentInfo",e,{content_ids:p,variant_id:p,product_id:x,contents:h,currency:T,value:A})},B=e=>{e.lineItems.forEach(t=>{p.push(t.variant.id),x.push(t.variant.product.id),h.push({id:t.variant.id,quantity:t.quantity})}),T=e.currencyCode,A=parseFloat(e.totalPrice.amount)},C=(e,t,o)=>{let a={shop:y,event_name:e,event_time:new Date().getTime(),event_id:t,action_source:"website",custom_data:o,event_source_url:P.context.document.location.href,social_type:"facebook"};N.sendBeacon(l+c,JSON.stringify(a))};function E(e,t,o){try{switch(P=t,y=o,N=e,B(t.data.checkout),t.name){case n:D(t.id);break}}catch(a){console.log(a)}}var s={},O="",g={},u=[],S=[],v=0,b="",V=e=>{K("AddPaymentInfo",e,{contents:u,variant_id:u,product_id:S,currency:b,value:v})},G=e=>{e.lineItems.forEach(t=>{u.push({id:t.variant.id,quantity:t.quantity}),S.push({id:t.variant.product.id,quantity:t.quantity})}),b=e.currencyCode,v=parseFloat(e.totalPrice.amount)},K=(e,t,o)=>{let a={shop:O,event:e,timestamp:new Date().toISOString(),event_id:t,properties:o,event_source_url:s.context.document.location.href,social_type:"tiktok",context:{page:{url:s.context.document.location.href,referrer:s.context.document.location.origin}}};g.sendBeacon(l+c,JSON.stringify(a))};function k(e,t,o){try{switch(s=t,O=o,g=e,G(t.data.checkout),t.name){case n:V(t.id);break}}catch(a){console.log(a)}}var w=!1,R=!1;console.log("%cWeb pixel final 61","color: red; font-weight: bold; font-size: 20px; padding: 4px");d(({analytics:e,browser:t,settings:o,init:a})=>{e.subscribe("all_standard_events",i=>{I.includes(i.name)&&(console.log("%coutput","color: green; font-weight: bold; font-size: 20px;",i),fetch(f+"/api/store/pixel?shop="+o.accountID).then(r=>r.json()).then(r=>{r.data&&r.data.length>0?(r.data.forEach(_=>{_.social_type==="facebook"&&(w=!0),_.social_type==="tiktok"&&(R=!0)}),w&&E(t,i,o.accountID),R&&k(t,i,o.accountID)):console.log("empty pixels")}).catch(r=>{console.log(r)}))}),console.log("web pixel loaded")});})();
